**卞卓航 22373017**

## 第一题

一个字符所需的位数为10bit，故传输速率应为480*10=4800bps

## 第二题

当存储N个数据时，主程序将数据取出，感知到的每次中断的时间是N个数据积累后的总时间除以N

故可以跟踪到每秒$\frac{N}{P*N+Q}$次请求

## 第三题

若每次中断均花费40us，则一秒内再不考虑其他时间损耗情况下，最多能处理1s/40us=25000次中断<40000次，故不能使用该程序中断方式与主机交换信息

## 第四题

该磁盘转速为3000PRM=50转/s，磁盘一秒内可传送50\*8\*1KB=400KB信息

在采用DMA方式时，每次传送2B，一秒内可以响应200K次，最短时间间隔为1s/200K0=5us<25us

但是，CPU中与IO接口交互的数据并不是在指令执行结束时进行交互的，如果都在指令执行结束时进行响应DMA，可能会造成响应IO不及时，造成数据的丢失。

故可以改为在每个存取周期结束时响应DMA

## 第五题

容量$Capacity=H*C*S*N$字节

若转速为W（RPM），则每秒转W/60圈，则每秒可读取$\frac{W}{60}*S*N*8$字节

## 第六题

### 中断服务程序 VS 子程序

从代码性质上：中断服务程序是特殊一段代码端，和主程序没有依赖关系。子程序也是主程序的一部分

从响应者/调用者关系上：中断服务程序是在遇到外部或内部中断时，由硬件负责从主程序跳转到中断服务程序，进行中断响应。调用子程序的调用者一般是主程序中的指令，调用者不同。

从指令所在地址：中断服务程序的启示指令地址一般不可改变，由中断向量地址处找到；子程序的地址可以在范围内任意改变。

从指令执行关系上：中断有优先级关系，而调用子程序是唯一的，调用了就跳转到对应指令地址处执行

从调用后的返回上：两种调用都需保护程序程序现场，中断服务程序通过中断指令完成，而子程序由指令本身完成。

### 磁盘 VS 打印机

中断也具有优先级，需要有限响应优先级高的中断，优先级高的中断关系到处理器能否正确工作，优先级低的中断可能只是响应外部硬件。

通常，打印机的打印动作只受打印机本身控制，与CPU无直接关系。因此，当打印机正在打印时，即使有优先级
更高的磁盘请求中断，打印机也不会停止打印。

但是，如果CPU正在执行打印机的中断服务程序，即打印机可能正在接收数据，此时，若磁盘请求中断，CPU就要中断正在运行的打印机中断服务程序，向打印机的数据传送会受到影响。

## 第七题

转速$V_r=6000RPM=100r/s$。单字长为64位，为8byte

数据传输速率为$v=100*16*512=819200bytes/s$

对于该磁盘，一秒能传输$n=819200/8=102400$字节，一秒能够执行$1/20us=5*10^4$条指令

可以使用该方案，但不能在指令结束时响应，否则可能会造成数据丢失，应该在每个存取周期结束后进行响应

## 第八题

该总线具有时钟频率，说明数据传输在时钟同步信号的控制下进行，为同步总线

总线的最大数据传输速率为$1s*400MHz*4=1600MB$

若一直最短总线事物，则传输速率为$400*4*\frac{1}{4}=400MB/s$

若一直最长总线事物，则传输速率为$400*4*\frac{8}{11}=1164MB/s$

## 第九题

### 1

对于该外部设备，每秒传送数据0.5MB，需要传送$0.5MB/4B=2^{17}$次，每次所花费时间相当于执行20条指令

对于该CPU，1s共可执行500M/4=125M条指令，故百分比为$20*2^{17}/125M=2.1\%$

### 2

对于该DMA，共需要处理$5MB/5000=10^3$次

故百分比为$500*10^3/125M=0.04\%$